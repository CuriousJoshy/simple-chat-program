<!DOCTYPE html>
<html>
	<head>
		<title>Simple Chat Program</title>
		
<!--		<link rel="stylesheet" type="text/css" href="/styles/style.css"/>-->
		
		<style>
			.page {
				display: none;
				
				width: 100%;
			}
			
			.active {
				display: inline-block;
			}
			
			.page > form:not([name="chat"]) {
				min-width: 400px;
				
				display: inline-block;
				
				vertical-align: top;
			}
			
			fieldset[disabled] {
				opacity: 0.75;
                cursor: pointer;
			}
			
			legend {
				text-align: right;
			}
			
            .page-name {
                text-align: left;
            }
            
			.group > input, select {				
				text-align: center;
				
				float: right
			}
			
			.group > span {
				float: left;
				clear: right;
			}
			
			.group {
				display: inline-block;
				
				margin-top: 5px;
				width: 100%;
			}
			
			ul {
				list-style-type: none;
			}
			
			form[name="chat"] {
				vertical-align: middle;
			}
			
			#message {
				display: inline-block;
				
				width: calc(90%);
				height: 40px;
				padding: 1px;
				
				vertical-align: middle;
				
				outline: 1px solid black;
				
				float: left;
			}
			
			#send {
				width: calc(10% - 12px);
				height: 40px;
				
				text-align: center;
				
				display: inline-block;
				
				outline: 1px solid black;
				
				padding: 1px;
				
				vertical-align: middle;
				
				float: left;
			}
			
			#send > span {
				display: inline-block;
				vertical-align: middle;
			}
			
			#send:not(.disabled):hover {
				cursor: pointer;
			}
		</style>
	</head>
	
	<body>
		<div id="container">
			<div id="create-user" class="page">
				<form name="create_user">
					<fieldset>
						<legend class="page-name">Create User</legend>
						
                        <div class="group"><span>Name:</span> <input name="chat_name" type="text"/></div><br>
						<div class="group"><input type="submit" value="Enter"/></div>
					</fieldset>
				</form>
			</div>
			
			<div id="rooms" class="page">
				<form name="rooms">
                    <fieldset>
                        <legend class="page-name">Rooms</legend>
                        
                        <div class="fieldset-wrapper">
                            <fieldset name="room_selection">
                                <legend>Room Selection</legend>

                                <div class="group"><span>Rooms: </span> <select name="active_rooms"></select></div><br>
                                <div class="group"><span>Password: </span> <input name="room_password" type="password"/></div><br>
                                <div class="group"><input type="submit" value="Join Room"/></div>
                            </fieldset>
                        </div>

                        <div class="fieldset-wrapper">
                            <fieldset name="room_creation" disabled>
                                <legend>Room Creation</legend>

                                <div class="group"><span>Room Name: </span> <input name="room_name" type="text"/></div><br>
                                <div class="group"><span>Room Password: </span> <input name="room_password" type="password"/></div><br>
                                <div class="group"><span>Room Size: </span> <input name="room_size" type="number" value="10" min="0" max="20"/></div><br>
                                <div class="group"><input type="submit" value="Create Room"/></div>
                            </fieldset>
                        </div>
                    </fieldset>
				</form>
			</div>
			
			<div id="chat-room" class="page">
				<ul>
					<li></li>
				</ul>
				
				<div id="message" contenteditable></div>
				<div id="send">
					<span>Send</span>
				</div>
            </div>
		</div>
	
		<script>
			var forms = document.forms, chat = forms.chat;
			
			function showPage(name)
			{
				let page = document.getElementById(name);
				
				if(!page)
					return;
				
				let current = document.getElementsByClassName("active")[0];
				
				if(current)
					current.classList.remove("active");
				
				page.classList.add("active");
			}
			
			[...document.getElementsByClassName("fieldset-wrapper")].forEach(elem =>
			{
				elem.addEventListener("click", function(e)
                {
                    let source = e.currentTarget;
                                        
                    source.firstElementChild.removeAttribute("disabled");
                    
                    (source.nextElementSibling || source.previousElementSibling).firstElementChild.setAttribute("disabled","true");
                    
                    e.target.focus();
                });
			});
			
//			chat.addEventListener("submit", function(e)
//			{
//				e.preventDefault();
//				
//				chat.message.value = "";
//			});
			
			showPage("chat-room");
		</script>
    </body>
</html>